'\" t
.\" $Revision: 1.21 $
.ds ]W Sun Microsystems
'\" !tbl | mmdoc
.\" SAM-QFS_notice_begin
.\"
.\" CDDL HEADER START
.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License (the "License").
.\" You may not use this file except in compliance with the License.
.\"
.\" You can obtain a copy of the license at pkg/OPENSOLARIS.LICENSE
.\" or http://www.opensolaris.org/os/licensing.
.\" See the License for the specific language governing permissions
.\" and limitations under the License.
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at pkg/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\" CDDL HEADER END
.\"
.\" Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
.\" Use is subject to license terms.
.\"
.\" SAM-QFS_notice_end
.TH build_cat 8 "27 Sep 2000"
.SH NAME
build_cat \- Build a media changer catalog file
.SH SYNOPSIS
.B /opt/SUNWsamfs/sbin/build_cat
[
.B \-t
.I media
]
.I file
.I catalog
.LP
.B /opt/SUNWsamfs/sbin/build_cat
[
.B \-t
.I media
] \-
.I catalog
.SH AVAILABILITY
.LP
SUNWsamfs
.SH DESCRIPTION
.LP
.B build_cat
will build a catalog file from \fIfile\fP. If '-' is substituted for
\fIfile\fP, standard input will be used.  If neither \fIfile\fP or '-' is
given, the usage message is emitted and \fIbuild_cat\fP exits.
.LP
Each line in the input file describes one piece of media in the catalog.
The first four fields are required.  The remaining fields should not be
supplied except if generated by the \fIdump_cat\fP utility.  Manually creating
or editing of these fields can produce undesirable results.
.LP
The fields, in order, on each line are:
.TP 10
.I "Index"
The index of this entry within the catalog.  The index must be an incrementing
integer starting at zero.
.TP
.I vsn
The volume serial name of the media.  If there is no volume serial
name then the character "?" should be used.
.TP
.I "bar code"
The bar code or volser for the media.  If there is no bar code then
the string NO_BAR_CODE should be used.
.TP
.I "media type"
The media type for this media (see
.BR mcf (5)).
.TP
.I "ptoc-fwa"
The next position to be used to write data to the media.
.TP
.I "access count"
The number of times the media has been mounted.
.TP
.I capacity
The capacity of the device in 1024-byte units.
.TP
.I "space avail"
The amount of space left in 1024-byte units.
.TP
.I flags
The flags field from the catalog entry, in numeric form.  
.TP
.I "sector size"
The tape block size or optical disk sector size.
.TP
.I "label time"
The time that the medium was labeled.
.TP
.I "slot"
The slot containing the volume within the automated library.
.TP
.I "partition"
The partition or side of a magneto-optical cartridge.
The value of partition is 0 for tapes, 1 or 2 for m-o
cartridges. 
.TP
.I "modification time"
The time the medium was last modified.
.TP
.I "mount time"
The time the medium was last mounted.
.TP
.I "reserve time"
The time the volume was reserved.  A value of 0 means no reservation.
.TP
.I reservation
The volume reservation - archive-set/owner/filessystem.
.TP
.I "information field"
Information about this volume supplied by the user.
.SH OPTIONS
.TP
.B \-t \fImedia\fP
Set the media type of the catalog to \fImedia\fP (see
.BR mcf (5).
If the media option is specified, the \fImedia type\fP field from the
input file must match
the media type specified by \fImedia\fP. If the media  option is
not specified, no enforcement of media type is performed.
.SH STRANGE MEDIA
.B build_cat
can be used to generate a catalog which contains a combination of usual
Sun StorEdge \%SAM-FS or Sun \%SAM-QFS media and so-called foreign media.  
Foreign media are those which
are in non-SAM-FS format.  The migration toolkit (SAMmigkit) provides
hooks for the site to use to enable Sun StorEdge \%SAM-FS and
Sun \%SAM-QFS file systems 
to stage (and optionally re-archive) data from strange media.
.PP
When building a catalog for foreign media, the \fB-t\fP\fI media\fP
option must be used to set the physical media type.  For example, if
the library contains LTO tapes, you would use 
.B \-t li
on the command line.  In the input file, for each volume which
is strange, specify a media type beginning with 'z'.  
.LP
.SH SEE ALSO
.BR dump_cat (8),
.BR export (8),
.BR import (8),
.BR mcf (5),
.BR sam-robotsd (8)
